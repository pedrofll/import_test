name: Import Corte

on:
  workflow_dispatch:        # Bot√≥n manual para ejecutar cuando quieras
 # schedule:
 #   - cron: '0 21 * * *'  # Ejecuta auto a las 9, 15 y 21

jobs:
  run-eci:
    runs-on: ubuntu-latest
    timeout-minutes: 45

    steps:
      # 1. Bajar c√≥digo
      - name: üì• Checkout
        uses: actions/checkout@v4

      # 2. Python
      - name: üêç Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      # 3. Dependencias (Vital: curl_cffi para ECI)
      - name: üì¶ Instalar dependencias
        run: |
          python -m pip install --upgrade pip
          pip install requests beautifulsoup4 curl_cffi

      # 4. Ejecutar SOLO Corte Ingl√©s
      - name: üè¢ Ejecutar El Corte Ingl√©s
        env:
          # Solo las variables que usa corte.py
          AFF_ELCORTEINGLES: ${{ secrets.AFF_ELCORTEINGLES }}
          START_URL_CORTEINGLES: ${{ secrets.START_URL_CORTEINGLES }}
          CORTEINGLES_URLS: ${{ secrets.CORTEINGLES_URLS }}
        run: python corte.py
